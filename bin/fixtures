#!/usr/bin/env php
<?php

use App\Entity\Address;
use App\Entity\Category;

$entityManager = require dirname(__DIR__) . '/doctrine.php';

$categories = include 'DataFixtures/categories.php';
$addresses = include 'DataFixtures/addresses.php'; 

foreach ($categories as $data) {
    $category = new Category();
    $category->setName($data['name']);
    $category->setDescription($data['description']);
    $category->setUpdatedAt(new DateTime($data['updatedAt']));
    $category->setCreatedAt(new DateTime($data['createdAt']));

    $entityManager->persist($category); //INSERT INTO...
    echo "Inserindo Nova Categoria para testes..." . PHP_EOL;
}

foreach ($addresses as $data) {
    $address = new Address();
    $address->setStreet($data['street']);
    $address->setNumber($data['number']);
    $address->setComplement($data['complement']);
    $address->setNeighborhood($data['neighborhood']);
    $address->setCity($data['city']);
    $address->setState($data['state']);
    $address->setZipCode($data['zipCode']);

    $entityManager->persist($address); // INSERT INTO...
    echo "Inserindo Novo EndereÃ§o para testes..." . PHP_EOL;
}

$entityManager->flush();